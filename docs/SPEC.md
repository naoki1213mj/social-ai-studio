# SPEC.md — エージェント仕様書

## 1. プロダクト概要

**名前**: TechPulse Social — AI-Powered Social Media Content Studio

**概要**: テクノロジー企業「TechPulse Inc.」の広報チームを支援する AI エージェントシステム。
単一の推論エージェントが複数ツールを自律的に活用し、戦略立案 → コンテンツ生成 → 品質レビューを
一貫して実行する。推論プロセスとツール使用状況をリアルタイムで可視化するモダンUIを提供。

**ターゲットユーザー**: テクノロジー企業の広報・マーケティング担当者

## 2. 機能要件

### 2.1 対応プラットフォーム

| プラットフォーム | 用途 | 文字数上限 | トーン |
|---|---|---|---|
| **LinkedIn** | B2B、思考リーダーシップ、採用 | 3,000文字 | プロフェッショナル、データドリブン |
| **X (Twitter)** | 開発者コミュニティ、速報 | 280文字 | カジュアル、テック寄り、ウィット |
| **Instagram** | ブランディング、社内文化 | 2,200文字 | ビジュアル重視、親しみやすい |

### 2.2 コンテンツタイプ

- 製品ローンチ告知
- 技術ブログ記事の要約投稿
- イベント告知・レポート
- 採用情報
- 業界トレンド解説
- 思考リーダーシップ投稿

### 2.3 入力パラメータ

ユーザーがUIから入力する情報:

| パラメータ | 必須 | 説明 |
|---|---|---|
| `topic` | ✅ | 投稿のトピック・テーマ |
| `platforms` | ✅ | 対象プラットフォーム（複数選択可） |
| `content_type` | ✅ | コンテンツタイプ |
| `tone` | ❌ | トーン指定（デフォルト: ブランドガイドライン準拠） |
| `additional_context` | ❌ | 追加コンテキスト・参考URL等 |
| `language` | ❌ | 出力言語（デフォルト: 英語、日本語対応） |

### 2.4 出力

各プラットフォーム向けに以下を生成:

- **本文テキスト**: プラットフォーム最適化済み
- **ハッシュタグ**: 関連性の高いタグ 3〜5個
- **投稿タイミング提案**: エンゲージメント最適時間帯
- **品質スコア**: レビューエージェントによる評価（1-10）
- **改善提案**: レビューエージェントからのフィードバック

## 3. エージェント構成（単一エージェント + マルチツール）

### エージェント: TechPulse Content Agent

- **役割**: トピックを分析し、各プラットフォーム向けのコンテンツを生成・レビュー
- **モデル**: gpt-5.2（推論モデル）
- **推論パターン**: CoT + ReAct + Self-Reflection を統合
- **ツール**: LLM がコンテキストに応じて自動選択

### ツール一覧

| ツール | 種別 | 説明 |
|--------|------|------|
| `web_search` | WebSearchPreviewTool (Hosted) | リアルタイムトレンド・ニュース検索 |
| `file_search` | FileSearchTool (Hosted) | ブランドガイドライン検索 |
| `generate_content` | @tool (Custom) | プラットフォーム別最適化コンテンツ生成 |
| `review_content` | @tool (Custom) | 5軸品質スコアリング + 改善提案 |

## 4. 非機能要件

- **レスポンス時間**: 全プロセス完了まで 60秒以内目標
- **エラーハンドリング**: 429 レート制限時の retry-after 対応
- **セキュリティ**: 資格情報はすべて環境変数経由
- **マルチターン**: Thread ID 保持でリファイン対話対応
- **UI**: Webブラウザからアクセス可能なインタラクティブUI

## 5. フロントエンド機能要件

| 機能 | 説明 |
|------|------|
| 🧠 **推論プロセス表示** | gpt-5.2 の thinking トークンを折りたたみでリアルタイム表示 |
| 🔧 **ツール使用状況可視化** | ツール名・入力・所要時間をタイムライン表示 |
| 🌐 **多言語対応 (i18n)** | UIラベル + コンテンツ生成言語の EN/JA 切替 |
| 🌙 **ダーク/ライトモード** | Tailwind dark: クラスで全コンポーネント対応 |
| 💬 **マルチターン会話** | 「もっとカジュアルに」等のリファイン指示に対応 |
| 📋 **コピー機能** | プラットフォーム別のプレーンテキストをクリップボードにコピー |
| 📝 **マークダウン出力** | エージェント出力を Markdown レンダリングで表示 |
| 📊 **品質スコア** | 5軸レーダーチャートで品質評価を可視化 |

## 6. 技術スタック

| レイヤー | 技術 |
|---|---|
| **AI基盤** | Microsoft Foundry (agent-framework-core + Responses API) |
| **モデル** | gpt-5.2 |
| **バックエンド** | Python + FastAPI（REST API + SSE ストリーミング） |
| **フロントエンド** | React + TypeScript + Tailwind CSS + shadcn/ui |
| **グラウンディング** | File Search（ブランドガイドライン）+ WebSearchPreview |
| **パッケージ管理** | uv (Python) / npm (React) |
| **認証** | DefaultAzureCredential |
